This repository contains some scripts useful to manipulate Apple Photos Library or work with photos files.
I used then to migrate my 800gb, 101.000 photos library from Apple Photos to digikam.

# Check Photos Library

Not once, but several times, I tried to export a file in my Mac Photos App and got an error that the photo could not be copied. Later I discovered that the phisical file was missing, althrough it is referenced in Photos database, and even can be seen inside the App (possibly a low res version of it). 

I made this simple script that checks if the file is missing or not on the disk. It generates an output file
with all UUIDs found on database that has missing files, that can be used on the Applescript "Missing Photos to Album".

On my last check, I found out that I have 720 photos/videos missing, from a total of about 100.000. 
Tested on Photos version is 3.0.
   
For now, this script checks ONLY for the Master version, but future releases will include edited versions as well. 

Requires python 3, may work with python 2, but not tested.

USAGE:
 ``` shell
  $ ./check_photos_library.py directory_of_your_library 
```

# Organize by Date

Reads EXIF data from files and move then to a directory structure like YEAR/MONTH/DAY.
You can choose the level to create. YEAR is mandatory. Will always be created.

Requires python 3 and PyExifTool, may work with python 2, but not tested.

**USAGE:**

   ``` shell
   ./organize_by_date.py [options] -s <path_or_files> -o [output_dir]
   ``` 
**OPTIONS:**

    -s, --source: list of source paths and files to check
    -o, --output_dir: where the directory structure will be created.
                      OPTIONAL. Defaults to './' 
    -m, --month: create MONTH directories. Result will be YEAR/MONTH . OPTIONAL
    -d, --day: create DAY directories. Result will be YEAR/MONTH/DAY . OPTIONAL
    -g, --guess: try to guess the date. Method sequence:             . OPTIONAL
                   1) EXIF DateTimeOriginal
                   2) EXIF DateTime
                   3) EXIF ModifyDate
                   4) Date of creation of file from SO 


   - path_or_files: if a Path, will scan all files inside and try to extract the EXIF data from then. those whose EXIF data could not be extract will be IGNORED
   - output_dir: where the files will be MOVED to. If ignored, defaults to current dir, './'

# Add Photos to Album

This applescript is meant to be run on Mac. The goal is to receive a list of photos UUIDs and search for them on a selection
of photos in Photos.app. If any photo in the selection matches one of those UUIDs, the photo is copied to a album chosen by the user.


**USAGE:**

   ``` shell
   - Open Photos.app
   - Select all photos you want to check
   - Double Click on Script Icon
   - Choose the file with UUIDs (generated by check_photos_library.py)
   - Type Album Name ("Photos Missing on Disk") will be used if pressed cancel
   ``` 